@model Basket
@{
    ViewBag.Title = "Index";
}
<title>Coin</title>
<div class="container text-center py-5">
    <h2 class="text-white">Sepetiniz</h2>
    <table class="table text-white">
        <thead>
            <tr>
                <th scope="col">Kısa Kod</th>
                <th scope="col" class="responsive-none">Coin Adı</th>
                <th scope="col">Adet</th>
                <th scope="col">Güncel Fiyat</th>
                <th scope="col">Toplam Fiyat</th>
            </tr>
        </thead>
        <tbody>

            <tr>
                <td>@Model.Coin.ShortName</td>
                <td class="responsive-none">@Model.Coin.Name</td>
                <td>@Model.Quantity</td>
                @{
                    string fiyat = Convert.ToString(Model.Coin.Price);
                    if (fiyat.Length > 7)
                    {
                        <td>
                            @fiyat.Substring(0, 7) <i class="fa fa-try" aria-hidden="true"></i>
                        </td>
                    }
                    else
                    {
                        <td>@Model.Coin.Price <i class="fa fa-try" aria-hidden="true"></i></td>
                    }
                }
                @{
                    string fiyat1 = Convert.ToString(Model.Coin.Price * Model.Quantity);
                    if (fiyat.Length > 7)
                    {
                        <td>
                            @fiyat1.Substring(0, 7) <i class="fa fa-try" aria-hidden="true"></i>
                        </td>
                    }
                    else
                    {
                        <td>@(Model.Coin.Price * Model.Quantity) <i class="fa fa-try" aria-hidden="true"></i></td>
                    }
                }
            </tr>
            <tr>
                <td colspan="5">
                    @{
                        var x = 0;
                        AppUser user = ViewBag.user as AppUser;
                        if (user.Wallet.Balance < (Model.Coin.Price * Model.Quantity))
                        {
                            x = 1;
                            <div style="color:red" class="alert alert-danger" role="alert"> Bakiyeniz yetersiz </div>
                        }

                        if (Model.Coin.Stock == 0)
                        {
                            x = 1;
                            <div class="alert alert-warning mx-5" role="alert">@Model.Coin.Name Satışta Yok!</div>
                        }
                        else
                        {
                            if (Model.Coin.Stock < Model.Quantity)
                            {
                                x = 1;
                                <div class="alert alert-warning mx-5" role="alert">Maksimum <strong>@Model.Coin.Stock </strong>adet @Model.Coin.Name alabilirsiniz!</div>
                            }
                        }
                        <a href="/Coins/CoinList" class="btn btn-primary m-2">
                            <i class="fa fa-arrow-left fa-lg" aria-hidden="true"> Satış Sayfasına Dön</i>

                        </a>
                        if (x != 1)
                        {
                            <a href="/Coins/BuyCoin" class="btn btn-success m-2"><i class="fa fa-lg">İşleme Devam Et</i> <i class="fa fa-arrow-right fa-lg" aria-hidden="true"></i></a>
                        }
                    }
                </td>
            </tr>
        </tbody>
    </table>
    <br />
    <br />
    <br />
    <br />
    <br />
    <div class="text-white">
        total fonk
        @*@Model.Total()*@
    </div>
</div>